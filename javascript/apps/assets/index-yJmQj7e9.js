import{a as y,p as P}from"./page_mf_2_insights__loadShare__react__loadShare__-BtZvGOZQ.js";import{g as re}from"./_commonjsHelpers-CqkleIqs.js";import{p as he}from"./page_mf_2_insights__mf_v__runtimeInit__mf_v__-CsGJ69y1.js";function E(r){"@babel/helpers - typeof";return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(r)}function Oe(r,e){if(E(r)!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(E(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function ne(r){var e=Oe(r,"string");return E(e)=="symbol"?e:e+""}function j(r,e,t){return(e=ne(e))in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function F(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function Re(r){if(Array.isArray(r))return F(r)}function Pe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function ie(r,e){if(r){if(typeof r=="string")return F(r,e);var t={}.toString.call(r).slice(8,-1);return t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set"?Array.from(r):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?F(r,e):void 0}}function Ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(r){return Re(r)||Pe(r)||ie(r)||Ce()}function je(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}function D(r,e){if(r==null)return{};var t,n,o=je(r,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(r);for(n=0;n<a.length;n++)t=a[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(r,t)&&(o[t]=r[t])}return o}function xe(r){if(Array.isArray(r))return r}function qe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n,o,a,s,u=[],l=!0,c=!1;try{if(a=(t=t.call(r)).next,e!==0)for(;!(l=(n=a.call(t)).done)&&(u.push(n.value),u.length!==e);l=!0);}catch(p){c=!0,o=p}finally{try{if(!l&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(c)throw o}}return u}}function we(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $(r,e){return xe(r)||qe(r,e)||ie(r,e)||we()}function K(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function _e(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,ne(n.key),n)}}function N(r,e,t){return e&&_e(r.prototype,e),Object.defineProperty(r,"prototype",{writable:!1}),r}function Se(){for(var r={},e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var o=0,a=t;o<a.length;o++){var s=a[o];if(s)for(var u=function(){var g=$(c[l],2),d=g[0],m=g[1],b=r[d];typeof b=="function"&&typeof m=="function"?r[d]=function(){for(var h=arguments.length,q=new Array(h),v=0;v<h;v++)q[v]=arguments[v];return m.apply(this,[].concat(q,[b]))}:Array.isArray(b)&&Array.isArray(m)?r[d]=[].concat(I(b),I(m)):r[d]=m},l=0,c=Object.entries(s);l<c.length;l++)u()}return r}var Ee=["target"];function U(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function z(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?U(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):U(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Me=(function(){function r(){K(this,r),this.registry={}}return N(r,[{key:"addOrReplace",value:function(t,n){for(var o,a,s=t+"-"+n,u=arguments.length,l=new Array(u>2?u-2:0),c=2;c<u;c++)l[c-2]=arguments[c];var p=Se.apply(void 0,l),g=(o=(a=p.targets)===null||a===void 0?void 0:a.map(function(m){if(typeof m=="string"){var b=m.split(":"),h=$(b,2),q=h[0],v=h[1],O=v===void 0?"0":v;return{id:q,priority:Number(O)}}return m}))!==null&&o!==void 0?o:[],d=z(z({},p),{},{targets:g,type:t,key:n});return this.registry[s]=d,d}},{key:"add",value:function(t,n){var o=t+"-"+n;if(this.registry[o])throw new Error("Entry already exist for key "+n);for(var a=arguments.length,s=new Array(a>2?a-2:0),u=2;u<a;u++)s[u-2]=arguments[u];return this.addOrReplace.apply(this,[t,n].concat(s))}},{key:"get",value:function(t,n){return this.registry[t+"-"+n]}},{key:"remove",value:function(t,n){var o=this;if(n){var a=t+"-"+n;this.registry[a]&&delete this.registry[t+"-"+n]}else{var s=this.find({type:t});s&&s.forEach(function(u){return o.remove(t,u.key)})}}},{key:"find",value:function(t){var n=Object.values(this.registry),o=t.target,a=D(t,Ee);return o&&(n=n.filter(function(s){var u;return(u=s.targets)===null||u===void 0?void 0:u.map(function(l){return l.id}).includes(o)}).sort(function(s,u){var l=s.targets&&s.targets.find(function(d){return d.id===t.target}),c=u.targets&&u.targets.find(function(d){return d.id===t.target}),p=l&&Number(l.priority),g=c&&Number(c.priority);return(p===void 0||isNaN(p))&&(g===void 0||isNaN(g))?0:p===void 0||isNaN(p)?-1:g===void 0||isNaN(g)?1:p-g})),n.filter(function(s){return!Object.keys(a).find(function(u){return s[u]!==a[u]})})}},{key:"clear",value:function(){this.registry={}}}]),r})(),S=new Me,oe={exports:{}},Te="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Ie=Te,De=Ie;function ue(){}function ae(){}ae.resetWarningCache=ue;var Ae=function(){function r(n,o,a,s,u,l){if(l!==De){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}r.isRequired=r;function e(){return r}var t={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:e,element:r,elementType:r,instanceOf:e,node:r,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:ae,resetWarningCache:ue};return t.PropTypes=t,t};oe.exports=Ae();var ke=oe.exports;const i=re(ke);var se=function(e){var t,n=(t=window)===null||t===void 0||(t=t.jahia)===null||t===void 0||(t=t.ui)===null||t===void 0?void 0:t.IframeRenderer;return n?y.createElement(n,e):y.createElement("span",null,"Jahia UI not loaded")};se.propTypes={url:i.string.isRequired};var $e=function(e){return y.createElement(se,{url:e})};function H(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function k(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?H(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):H(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Ke=function r(e,t){return e.filter(t).map(function(n){return k(k({},n),{},{children:n.children&&r(n.children,t)})})},Ne=function r(e,t){return e.map(function(n){return k(k({},t(n)),{},{children:n.children&&r(n.children,t)})})},We=(function(){function r(e){K(this,r),this.data=e}return N(r,[{key:"filter",value:function(t){return new r(Ke(this.data,t))}},{key:"map",value:function(t){return new r(Ne(this.data,t))}},{key:"getData",value:function(){return this.data}}]),r})();function Y(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function A(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Y(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Y(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var st=function(e,t){var n=P.useMemo(function(){var d=function v(O){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return S.find({type:"adminRoute",target:O+w}).flatMap(function(R){return[R].concat(I(v(O,"-"+R.key)))}).map(function(R){return A(A({},R),{},{render:R.render||typeof R.iframeUrl=="string"&&function(){return $e(R.iframeUrl)}})})},m=d(e),b=function v(O){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return S.find({type:"adminRoute",target:O+w}).filter(function(R){return!R.omitFromTree}).map(function(R){return A(A({},R),{},{children:v(O,"-"+R.key)})})},h=new We(b(e)),q=m.filter(function(v){return v.requiredPermission}).map(function(v){return v.requiredPermission}).filter(function(v,O,w){return w.indexOf(v)===O});return{routes:m,tree:h,allPermissions:q}},[e]),o=n.tree,a=n.routes,s=n.allPermissions,u=[];if(t)for(var l=S.get("adminRoute",t);l;){var c,p=(c=l.targets)===null||c===void 0?void 0:c.find(function(d){return d.id.startsWith(e+"-")});if(p){var g=p.id.substr(e.length+1);u.push(g),l=S.get("adminRoute",g)}else l=null}return{tree:o,defaultOpenedItems:u,routes:a,allPermissions:s}},W=P.createContext({}),ct=W.Consumer;function J(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function C(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?J(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):J(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var Be=function(){var e=P.useState({components:{},componentsProps:{}}),t=$(e,2),n=t[0],o=t[1],a=P.useContext(W);P.useEffect(function(){a.render=function(u,l,c){return o(function(p){return{components:C(C({},p.components),{},j({},u,l)),componentsProps:C(C({},p.componentsProps),{},j({},u,C({},c)))}})},a.setProperties=function(u,l){return o(function(c){if(c.components[u]){var p={components:C({},c.components),componentsProps:C({},c.componentsProps)};return p.componentsProps[u]=C(C({},c.componentsProps[u]),l),p}return c})},a.destroy=function(u){return o(function(l){var c={components:C({},l.components),componentsProps:C({},l.componentsProps)};return delete c.components[u],delete c.componentsProps[u],c})}},[a]);var s=Object.keys(n.components).map(function(u){var l=n.components[u];return y.createElement(l,C({key:u},n.componentsProps[u]))});return y.createElement(y.Fragment,null,s)},lt=function(e){var t=e.children,n=P.useRef({});return y.createElement(W.Provider,{value:n.current},y.createElement(Be,null),t)};function x(){return x=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},x.apply(null,arguments)}var Fe=["render","componentToRender"];function X(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function G(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?X(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):X(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var ce=function(e){var t=e.render,n=e.componentToRender,o=D(e,Fe),a=P.useContext(W),s={id:"actionComponent-"+o.id};return P.useEffect(function(){s.id="actionComponent-"+o.id,s.render=function(u,l){var c;(c=a.render)===null||c===void 0||c.call(a,s.id,u,G(G({},o),{},{onExited:s.handleDestroy},l))},s.handleDestroy=function(){var u;(u=a.destroy)===null||u===void 0||u.call(a,s.id)},s.setProperties=function(u){var l;(l=a.setProperties)===null||l===void 0||l.call(a,s.id,u)}}),o.onClick?y.createElement(t,o):y.createElement(t,x({onClick:function(){return s.render(n)}},o))};ce.propTypes={render:i.elementType.isRequired,componentToRender:i.elementType.isRequired,id:i.string.isRequired,onClick:i.func.isRequired};var dt={component:ce};function L(r,e){return L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},L(r,e)}function le(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&L(r,e)}function Le(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function de(r,e){if(e&&(E(e)=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Le(r)}function M(r){return M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M(r)}var Ve=["context"],Ue=["context","actionKey","render","loading"];function Q(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function _(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Q(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Q(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function ze(r){var e=pe();return function(){var t,n=M(r);if(e){var o=M(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return de(this,t)}}function pe(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(pe=function(){return!!r})()}var He=0,Ye=function(e){var t=function(o){var a=o.context,s=D(o,Ve);return y.createElement(e,x({},a,s))};return t},V=(function(r){le(t,r);var e=ze(t);function t(n){var o;return K(this,t),o=e.call(this,n),o.id=n.actionKey+"-"+He++,o.RenderWrapper=Ye(n.render),o}return N(t,[{key:"render",value:function(){var o=this.props,a=o.context,s=o.actionKey,u=o.render,l=o.loading,c=D(o,Ue),p=S.get("action",s);if(!p)return null;a&&console.warn("Warn : context in DisplayAction is deprecated",s,a);var g=typeof p.component=="function"?p.component:u,d=_(_({},a),c),m=_(_(_({},p),d),{},{originalContext:d,id:this.id,actionKey:s});m.init&&m.init(m,this.props);var b={};if(b["data-registry-key"]=p.type+":"+p.key,c.target&&p.targets){var h=p.targets.find(function(q){return q.id===c.target});h&&(b["data-registry-target"]=h.id+":"+h.priority)}return y.createElement(g,x({key:this.id},m,{buttonProps:_(_({},m.buttonProps),b),context:m,render:this.RenderWrapper,loading:l}))}}]),t})(y.PureComponent);j(V,"propTypes",{actionKey:i.string.isRequired,context:i.object,render:i.elementType.isRequired,loading:i.elementType,onClick:i.func});var Je=["target","filter"],fe=function(e){var t=e.target,n=e.filter,o=D(e,Je),a=[],s=[];return Array.isArray(t)?s=t:s.push(t),s.forEach(function(u){var l=S.find({type:"action",target:u}).filter(n||function(){return!0}).map(function(c){return y.createElement(V,x({},o,{key:c.key,target:u,actionKey:c.key}))});a.push.apply(a,I(l))}),y.createElement(y.Fragment,null,a)};fe.propTypes={target:i.string.isRequired,context:i.object,render:i.elementType.isRequired,loading:i.elementType,filter:i.func};const{initPromise:Xe}=he,Ge=Xe.then(r=>r.loadShare("react-dom",{customShareInfo:{shareConfig:{singleton:!0,strictVersion:!1,requiredVersion:"^18.3.1"}}})),Qe=await Ge.then(r=>r());var Ze=Qe;const et=re(Ze);function Z(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function f(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Z(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):Z(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}var me=function(e){var t=f(f({},e.context),e),n=t.id,o=t.parentMenuContext,a=t.menuItemRenderer;return P.useEffect(function(){o.dispatch({type:"loading",item:n})}),y.createElement(a,x({},e,{onClick:function(){}}))};me.propTypes={id:i.string.isRequired,context:i.object,parentMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,menuItemRenderer:i.elementType.isRequired};var ye=function(e){var t=f(f({},e.context),e),n=t.id,o=t.onClick,a=t.menuContext,s=t.menuState,u=t.rootMenuContext,l=t.parentMenuContext,c=t.menuItemRenderer,p=t.isVisible;return P.useEffect(function(){l.dispatch({type:"loaded",item:n,isVisible:p!==!1})}),p===!1?null:y.createElement(c,x({},e,{onClick:function(d){o&&(o(e,d),d.stopPropagation(),u.dispatch({type:"close"}))},onMouseEnter:function(d){if(a){if(s&&!s.isOpen){var m=d.currentTarget.getBoundingClientRect();a.display(null,{anchorEl:{getBoundingClientRect:function(){return m}},anchorElOrigin:{vertical:"top",horizontal:"right"}})}}else l.dispatch({type:"setSubMenuContext",value:null})},onMouseLeave:function(){a&&setTimeout(function(){a.dispatch({type:"leaveItem"})},100)}}))};ye.propTypes={context:i.object,id:i.string.isRequired,menuItemRenderer:i.elementType.isRequired,rootMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,parentMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,menuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,menuState:i.shape({id:i.string.isRequired,currentCtx:i.oneOfType([i.object,i.shape({originalContext:i.object})]).isRequired,anchor:i.shape({anchorEl:i.any,anchorPosition:i.shape({top:i.number.isRequired,left:i.number.isRequired}),anchorElOrigin:i.shape({horizontal:i.oneOf(["left","center","right"]).isRequired,vertical:i.oneOf(["top","center","bottom"]).isRequired}),transformElOrigin:i.shape({horizontal:i.oneOf(["left","right"]).isRequired,vertical:i.oneOf(["top","bottom"]).isRequired})}).isRequired,isRendered:i.bool.isRequired,isOpen:i.bool.isRequired,isInMenu:i.bool.isRequired,isSubMenu:i.bool.isRequired,subMenuContext:i.oneOfType([i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}),i.oneOf([null])]),loadingItems:i.arrayOf(i.string).isRequired,loadedItems:i.arrayOf(i.string).isRequired}),onClick:i.func,isVisible:i.bool};var ge=function(e){var t=e.menuTarget,n=e.menuFilter,o=e.isMenuPreload,a=e.menuRenderer,s=e.menuItemRenderer,u=e.rootMenuContext,l=e.originalContext,c=e.id,p=e.actionKey,g=e.menuContext,d=e.menuState,m=e.menuItemProps;return y.createElement(a,{id:c,context:f({key:e.id},e),menuKey:p,isSubMenu:d.isSubMenu,anchor:d.anchor,isLoading:d.loadingItems.length>0,isOpen:d.isOpen,onMouseEnter:function(){g.dispatch({type:"enterMenu"})},onMouseLeave:function(){g.dispatch({type:"leaveMenu"})},onClose:function(h){h.preventDefault(),h.stopPropagation(),g.dispatch({type:"close"})},onExited:function(){o||g.dispatch({type:"destroy"})}},y.createElement(fe,x({},l,{id:c,target:t,filter:n,buttonProps:m,menuRenderer:a,menuItemRenderer:s,parentMenuContext:g,rootMenuContext:u,loading:me,render:ye})))};ge.propTypes={id:i.string.isRequired,actionKey:i.string.isRequired,menuRenderer:i.elementType.isRequired,menuItemRenderer:i.elementType.isRequired,menuItemProps:i.object,isMenuPreload:i.bool,menuTarget:i.string.isRequired,menuFilter:i.func,isMenuUseEventPosition:i.bool,buttonIcon:i.element,originalContext:i.object,rootMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,parentMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,menuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,menuState:i.shape({id:i.string.isRequired,currentCtx:i.oneOfType([i.object,i.shape({originalContext:i.object})]).isRequired,anchor:i.shape({anchorEl:i.any,anchorPosition:i.shape({top:i.number.isRequired,left:i.number.isRequired}),anchorElOrigin:i.shape({horizontal:i.oneOf(["left","center","right"]).isRequired,vertical:i.oneOf(["top","center","bottom"]).isRequired}),transformElOrigin:i.shape({horizontal:i.oneOf(["left","right"]).isRequired,vertical:i.oneOf(["top","bottom"]).isRequired})}).isRequired,isRendered:i.bool.isRequired,isOpen:i.bool.isRequired,isInMenu:i.bool.isRequired,isSubMenu:i.bool.isRequired,subMenuContext:i.oneOfType([i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}),i.oneOf([null])]),loadingItems:i.arrayOf(i.string).isRequired,loadedItems:i.arrayOf(i.string).isRequired}).isRequired};function ee(r,e){return r.indexOf(e)===-1?[].concat(I(r),[e]):r}function B(r,e){return r.filter(function(t){return t!==e})}var tt=function(e,t){switch(t.type){case"render":return f(f({},e),{},{currentCtx:t.currentCtx?t.currentCtx:{},isRendered:!0});case"destroy":return f(f({},e),{},{isRendered:!1});case"open":return f(f({},e),{},{isOpen:!0,anchor:t.anchor});case"close":return f(f({},e),{},{isOpen:!1});case"leaveItem":return f(f({},e),{},{isOpen:e.isInMenu});case"enterMenu":return f(f({},e),{},{isInMenu:!0});case"leaveMenu":return f(f({},e),{},{isInMenu:!1});case"setSubMenuContext":return e.subMenuContext===t.value?e:(e.subMenuContext&&e.subMenuContext!==t.value&&setTimeout(function(){var n;(n=e.subMenuContext)===null||n===void 0||n.dispatch({type:"close"})},0),f(f({},e),{},{subMenuContext:t.value}));case"loading":return e.loadingItems.includes(t.item)||e.loadedItems.includes(t.item)?e:f(f({},e),{},{loadingItems:ee(e.loadingItems,t.item),loadedItems:B(e.loadedItems,t.item)});case"loaded":return!e.loadingItems.includes(t.item)&&t.isVisible!==!1===e.loadedItems.includes(t.item)?e:f(f({},e),{},{loadingItems:B(e.loadingItems,t.item),loadedItems:t.isVisible===!1?B(e.loadedItems,t.item):ee(e.loadedItems,t.item)});default:return e}},be=function(e){var t=e.rootMenuContext,n=e.parentMenuContext,o=e.isMenuPreload,a=e.render,s=e.loading,u=e.visibilityPredicate,l="actionComponent-"+e.id,c=P.useRef(document.getElementById("menuHolder"));c.current||(c.current=document.createElement("div"),c.current.setAttribute("id","menuHolder"),document.body.appendChild(c.current));var p=P.useReducer(tt,{id:l,isRendered:!1,isOpen:!1,isSubMenu:!!n,isInMenu:!1,loadingItems:[],loadedItems:[],subMenuContext:null,currentCtx:{},anchor:{anchorPosition:{top:-1e3,left:-1e3}}}),g=$(p,2),d=g[0],m=g[1],b=P.useMemo(function(){return{id:l,dispatch:m,display:function(v,O){m({type:"render",currentCtx:v}),n&&n.dispatch({type:"setSubMenuContext",value:b}),setTimeout(function(){m({type:"open",anchor:O})},0)}}},[l,n]);P.useEffect(function(){!d.isOpen&&d.subMenuContext&&(d.subMenuContext.dispatch({type:"close"}),m({type:"setSubMenuContext",value:null}))},[l,d,b]);var h=!o||d.loadedItems.length>0;return u&&(h=u(d)),y.createElement(y.Fragment,null,d.isOpen&&d.loadingItems.length>0&&s?y.createElement(s,e):y.createElement(a,x({},e,{menuContext:b,menuState:d,isVisible:h,onClick:function(v,O){if(!n)if(O.currentTarget&&!v.isMenuUseEventPosition){var w=O.currentTarget.getBoundingClientRect(),R=f(f({},O.currentTarget),{},{getBoundingClientRect:function(){return w}});b.display(v,{anchorEl:R,anchorElOrigin:{vertical:"bottom",horizontal:"left"}})}else b.display(v,{anchorPosition:{left:O.clientX,top:O.clientY}})}})),(d.isRendered||o)&&et.createPortal(y.createElement(ge,x({},e,d.currentCtx.originalContext,{originalContext:f(f({},e.originalContext),d.currentCtx.originalContext),menuContext:b,menuState:d,rootMenuContext:t||b})),c.current))};be.propTypes={id:i.string.isRequired,menuRenderer:i.elementType.isRequired,actionKey:i.string.isRequired,menuItemRenderer:i.elementType.isRequired,isMenuPreload:i.bool,menuTarget:i.string.isRequired,menuFilter:i.func,isMenuUseEventPosition:i.bool,originalContext:i.object,rootMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,parentMenuContext:i.shape({id:i.string.isRequired,dispatch:i.func.isRequired,display:i.func.isRequired}).isRequired,render:i.elementType.isRequired,loading:i.elementType.isRequired,visibilityPredicate:i.func};var pt={component:be};function te(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(r,o).enumerable})),t.push.apply(t,n)}return t}function T(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?te(Object(t),!0).forEach(function(n){j(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):te(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function rt(r){var e=ve();return function(){var t,n=M(r);if(e){var o=M(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return de(this,t)}}function ve(){try{var r=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ve=function(){return!!r})()}var nt=(function(r){le(t,r);var e=rt(t);function t(n){var o;return K(this,t),o=e.call(this,n),o.onClickRef=y.createRef(),o}return N(t,[{key:"open",value:function(o,a){var s,u;(s=(u=this.onClickRef).current)===null||s===void 0||s.call(u,T(T(T({},this.props),{},{isMenuUseEventPosition:!0},a),{},{originalContext:T(T({},this.props),a)}),o),o.preventDefault()}},{key:"render",value:function(){var o=this,a=this.props.setOpenRef;return a&&(a.current=this.open.bind(this)),y.createElement(V,x({},this.props,{render:function(u){var l=u.onClick;return o.onClickRef.current=l,null}}))}}]),t})(y.Component);j(nt,"propTypes",{actionKey:i.string.isRequired});export{Be as ComponentRenderer,ce as ComponentRendererActionComponent,ct as ComponentRendererConsumer,W as ComponentRendererContext,lt as ComponentRendererProvider,nt as ContextualMenu,V as DisplayAction,fe as DisplayActions,se as IframeRenderer,be as MenuActionComponent,dt as componentRendererAction,Se as composeServices,$e as getIframeRenderer,pt as menuAction,S as registry,st as useAdminRouteTreeStructure};
//# sourceMappingURL=index-yJmQj7e9.js.map
